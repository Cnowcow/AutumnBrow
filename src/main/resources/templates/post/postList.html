<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>손님 정보 목록</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center">손님 정보 목록</h2>
    <table class="table table-bordered">
        <thead>
        <tr>
            <th>post_id</th>
            <th>이름</th>
            <th>전화번호</th>
            <th>방문경로</th>
            <th>시술내용</th>
            <th>시술날짜</th>
            <th>리터치</th>
        </tr>
        </thead>
        <tbody>
        <!-- 여기에 서버에서 가져온 데이터가 반복해서 들어가야 합니다. -->
        <tr data-bs-toggle="modal" data-bs-target="#editModal" onclick="openEditModal(1)">
            <td>1</td>
            <td>홍길동</td>
            <td>010-1234-5678</td>
            <td>SNS</td>
            <td>속눈썹펌</td>
            <td>2024-10-10</td>
            <td><input type="checkbox" checked></td>
        </tr>
        <tr data-bs-toggle="modal" data-bs-target="#editModal" onclick="openEditModal(2)">
            <td>2</td>
            <td>김철수</td>
            <td>010-9876-5432</td>
            <td>지인 추천</td>
            <td>아이라인</td>
            <td>2024-10-11</td>
            <td><input type="checkbox"></td>
        </tr>
        <!-- 추가 데이터 행 -->
        </tbody>
    </table>
</div>

<!-- 수정 모달 -->
<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editModalLabel">손님 정보 수정</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/update-customer" method="post" id="editForm">
                    <input type="hidden" id="postId" name="postId">
                    <div class="mb-3">
                        <label for="name" class="form-label">이름</label>
                        <input type="text" class="form-control" id="name" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="phone" class="form-label">전화번호</label>
                        <input type="text" class="form-control" id="phone" name="phone" required>
                    </div>
                    <div class="mb-3">
                        <label for="visitPath" class="form-label">방문 경로</label>
                        <select class="form-control" id="visitPath" name="visitPath">
                            <option value="SNS">Instagram</option>
                            <option value="지인 추천">당근</option>
                            <option value="검색">카카오채널</option>
                            <option value="직접입력">직접입력</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="treatmentContents" class="form-label">시술 내용</label>
                        <select class="form-control" id="treatmentContents" name="treatmentContents">
                            <option value="속눈썹펌">속눈썹펌</option>
                            <option value="블랙틴팅펌">블랙틴팅펌</option>
                            <option value="탱글영양+블랙틴팅펌">탱글영양 + 블랙틴팅펌</option>
                            <option value="자연눈썹">눈썹문신 (자연)</option>
                            <option value="섀도우눈썹">눈썹문신 (섀도우)</option>
                            <option value="콤보눈썹">눈썹문신 (콤보)</option>
                            <option value="아이라인">아이라인</option>
                            <option value="헤어라인">헤어라인</option>
                            <option value="입술타투">입술타투</option>
                            <option value="직접입력">직접입력</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="treatmentDate" class="form-label">시술 날짜</label>
                        <input type="date" class="form-control" id="treatmentDate" name="treatmentDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="retouch" class="form-label">리터치</label>
                        <input type="checkbox" id="retouch" name="retouch">
                    </div>
                    <div class="mb-3">
                        <label for="info" class="form-label">비고</label>
                        <textarea class="form-control" id="info" name="info"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">수정 완료</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function openEditModal(postId) {
        // 여기서 postId에 따라 서버에서 정보를 가져와서 모달에 채워야 함
        // 이 예시에서는 임의의 데이터로 설정함
        if (postId === 1) {
            $('#postId').val(1);
            $('#name').val('홍길동');
            $('#phone').val('010-1234-5678');
            $('#visitPath').val('SNS');
            $('#treatmentContents').val('속눈썹펌');
            $('#treatmentDate').val('2024-10-10');
            $('#retouch').prop('checked', true);
            $('#info').val('비고 내용 1');
        } else if (postId === 2) {
            $('#postId').val(2);
            $('#name').val('김철수');
            $('#phone').val('010-9876-5432');
            $('#visitPath').val('지인 추천');
            $('#treatmentContents').val('아이라인');
            $('#treatmentDate').val('2024-10-11');
            $('#retouch').prop('checked', false);
            $('#info').val('비고 내용 2');
        }
    }
</script>
</body>
</html>
